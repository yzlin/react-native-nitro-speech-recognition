///
/// JHandlers.hpp
/// This file was generated by nitrogen. DO NOT MODIFY THIS FILE.
/// https://github.com/mrousavy/nitro
/// Copyright Â© 2025 Marc Rousavy @ Margelo
///

#pragma once

#include <fbjni/fbjni.h>
#include "Handlers.hpp"

#include "EventType.hpp"
#include "JEventType.hpp"
#include "JFunc_void_EventType.hpp"
#include "JFunc_void_SpeechRecognitionErrorEvent.hpp"
#include "JFunc_void_SpeechRecognitionResultEvent.hpp"
#include "JSpeechRecognitionErrorEvent.hpp"
#include "JSpeechRecognitionResult.hpp"
#include "JSpeechRecognitionResultEvent.hpp"
#include "SpeechRecognitionErrorEvent.hpp"
#include "SpeechRecognitionResult.hpp"
#include "SpeechRecognitionResultEvent.hpp"
#include <functional>
#include <optional>
#include <string>
#include <vector>

namespace margelo::nitro::nitrospeechrecognition {

  using namespace facebook;

  /**
   * The C++ JNI bridge between the C++ struct "Handlers" and the the Kotlin data class "Handlers".
   */
  struct JHandlers final: public jni::JavaClass<JHandlers> {
  public:
    static auto constexpr kJavaDescriptor = "Lcom/margelo/nitro/nitrospeechrecognition/Handlers;";

  public:
    /**
     * Convert this Java/Kotlin-based struct to the C++ struct Handlers by copying all values to C++.
     */
    [[maybe_unused]]
    [[nodiscard]]
    Handlers toCpp() const {
      static const auto clazz = javaClassStatic();
      static const auto fieldOnResult = clazz->getField<JFunc_void_SpeechRecognitionResultEvent::javaobject>("onResult");
      jni::local_ref<JFunc_void_SpeechRecognitionResultEvent::javaobject> onResult = this->getFieldValue(fieldOnResult);
      static const auto fieldOnError = clazz->getField<JFunc_void_SpeechRecognitionErrorEvent::javaobject>("onError");
      jni::local_ref<JFunc_void_SpeechRecognitionErrorEvent::javaobject> onError = this->getFieldValue(fieldOnError);
      static const auto fieldOnEvent = clazz->getField<JFunc_void_EventType::javaobject>("onEvent");
      jni::local_ref<JFunc_void_EventType::javaobject> onEvent = this->getFieldValue(fieldOnEvent);
      return Handlers(
        [&]() -> std::function<void(const SpeechRecognitionResultEvent& /* result */)> {
          if (onResult->isInstanceOf(JFunc_void_SpeechRecognitionResultEvent_cxx::javaClassStatic())) [[likely]] {
            auto downcast = jni::static_ref_cast<JFunc_void_SpeechRecognitionResultEvent_cxx::javaobject>(onResult);
            return downcast->cthis()->getFunction();
          } else {
            auto onResultRef = jni::make_global(onResult);
            return [onResultRef](SpeechRecognitionResultEvent result) -> void {
              return onResultRef->invoke(result);
            };
          }
        }(),
        [&]() -> std::function<void(const SpeechRecognitionErrorEvent& /* error */)> {
          if (onError->isInstanceOf(JFunc_void_SpeechRecognitionErrorEvent_cxx::javaClassStatic())) [[likely]] {
            auto downcast = jni::static_ref_cast<JFunc_void_SpeechRecognitionErrorEvent_cxx::javaobject>(onError);
            return downcast->cthis()->getFunction();
          } else {
            auto onErrorRef = jni::make_global(onError);
            return [onErrorRef](SpeechRecognitionErrorEvent error) -> void {
              return onErrorRef->invoke(error);
            };
          }
        }(),
        [&]() -> std::function<void(EventType /* eventType */)> {
          if (onEvent->isInstanceOf(JFunc_void_EventType_cxx::javaClassStatic())) [[likely]] {
            auto downcast = jni::static_ref_cast<JFunc_void_EventType_cxx::javaobject>(onEvent);
            return downcast->cthis()->getFunction();
          } else {
            auto onEventRef = jni::make_global(onEvent);
            return [onEventRef](EventType eventType) -> void {
              return onEventRef->invoke(eventType);
            };
          }
        }()
      );
    }

  public:
    /**
     * Create a Java/Kotlin-based struct by copying all values from the given C++ struct to Java.
     */
    [[maybe_unused]]
    static jni::local_ref<JHandlers::javaobject> fromCpp(const Handlers& value) {
      using JSignature = JHandlers(jni::alias_ref<JFunc_void_SpeechRecognitionResultEvent::javaobject>, jni::alias_ref<JFunc_void_SpeechRecognitionErrorEvent::javaobject>, jni::alias_ref<JFunc_void_EventType::javaobject>);
      static const auto clazz = javaClassStatic();
      static const auto create = clazz->getStaticMethod<JSignature>("fromCpp");
      return create(
        clazz,
        JFunc_void_SpeechRecognitionResultEvent_cxx::fromCpp(value.onResult),
        JFunc_void_SpeechRecognitionErrorEvent_cxx::fromCpp(value.onError),
        JFunc_void_EventType_cxx::fromCpp(value.onEvent)
      );
    }
  };

} // namespace margelo::nitro::nitrospeechrecognition
